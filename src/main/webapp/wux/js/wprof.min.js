var WP
!function(t){function e(){var t=window?window.__data:void 0
return t?(t.sys||(t.sys=[]),t.jvm||(t.jvm=[]),t.evn||(t.evn=[]),t):{sys:[],jvm:[],evn:[],msg:"No data available"}}t.getData=e}(WP||(WP={}))
var WP
!function(t){var e=WUX.WUtil,s=function(t){function e(e){var s=t.call(this,e,"DlgEvents")||this
return s.title="Events",s.lblLab=new WUX.WLabel(s.subId("ll"),"","","",WUX.CSS.LABEL_INFO),s.lblVal=new WUX.WLabel(s.subId("lv"),"","","",WUX.CSS.LABEL_NOTICE),s.tabEvn=new WUX.WTable(s.subId("te"),["Date time","Type","Application","Class","Method","Elapsed","Size","Exception"]),s.tabEvn.selectionMode="single",s.body.addRow().addCol("12",{a:"right"}).add(s.lblLab).addRow().addCol("12",{a:"right"}).add(s.lblVal).addRow().addCol("12").section("Events").add(s.tabEvn),s}return __extends(e,t),e.prototype.updateProps=function(e){t.prototype.updateProps.call(this,e),this.lblLab&&this.lblLab.setState(this.props)},e.prototype.updateState=function(e){t.prototype.updateState.call(this,e),this.state||(this.state=0),this.lblVal&&(this._title&&this._title.indexOf("perc")>=0?this.lblVal.setState(this.state+" %"):this.lblVal.setState(""+this.state))},e.prototype.setEvents=function(t){t||(t=[]),this.tabEvn&&this.tabEvn.setState(t)},e}(WUX.WDialog)
t.DlgEvents=s
var i=function(i){function a(e){var a=i.call(this,e||"*","GUIAnalyze","")||this
return a.state=t.getData(),a.frh="00:00:00",a.toh="24:00:00",a.dlg=new s(a.subId("dlg")),a.dlg.onHiddenModal(function(t){$(window).scrollTop(0)}),a}return __extends(a,i),a.prototype.render=function(){var t=this,e=new Array
e.push({id:"sys_1",text:"CPU usage percentage"}),e.push({id:"sys_2",text:"Memory usage percentage"}),e.push({id:"sys_3",text:"Disk usage percentage"}),e.push({id:"jvm_1",text:"Metaspace used"}),e.push({id:"jvm_3",text:"Heap Eden used"}),e.push({id:"jvm_5",text:"Heap Survivor used"}),e.push({id:"jvm_7",text:"Heap Tenured used"}),e.push({id:"jvm_9",text:"Code Cache used"}),e.push({id:"jvm_11",text:"Loaded Class count"}),e.push({id:"jvm_12",text:"Total Loaded class count"}),e.push({id:"jvm_13",text:"Unloaded class count"}),e.push({id:"jvm_14",text:"Thread count"}),e.push({id:"jvm_15",text:"Peak Thread count"}),e.push({id:"jvm_16",text:"Total Started Thread count"})
for(var s=[],i=0;i<24;i++)for(var a=i<10?"0"+i:""+i,h=0;h<60;h+=15){var n=h<10?"0"+h:""+h
s.push({id:a+":"+n+":00",text:a+":"+n})}return s.push({id:"24:00:00",text:"24:00"}),this.state||(this.state={msg:"No data",evn:[],sys:[],jvm:[]}),this.props||(this.props=e[0].id,this.title=e[0].text),this.sel=new WUX.WSelect("sel",e,!1,"form-control"),this.sel.setState(this.props),this.sel.on("statechange",function(e){t.refresh()}),this.sfh=new WUX.WSelect("frh",s,!1,"form-control"),this.sfh.setState("00:00:00"),this.sfh.on("statechange",function(e){t.refresh()}),this.sth=new WUX.WSelect("toh",s,!1,"form-control"),this.sth.setState("24:00:00"),this.sth.on("statechange",function(e){t.refresh()}),this.frm=new WUX.WFormPanel(this.subId("frm")),this.frm.addRow(),this.frm.addComponent("sel","Select",this.sel),this.frm.addComponent("frh","From time",this.sfh),this.frm.addComponent("toh","To time",this.sth),this.lbl=new WUX.WLabel(this.subId("lbl"),this.state.msg,WUX.WIcon.WARNING,"",WUX.CSS.LABEL_NOTICE),this.chr=new WUX.WChartJS(this.subId("chr"),"line"),this.chr.setState(this.getChartData()),this.chr.onClickChart(function(e){var s=t.chr.getLabel(e),i=t.chr.getValue(e)
t.title||(t.title="Events"),t.dlg.title=t.title,t.dlg.setProps(s),t.dlg.setState(i),t.dlg.setEvents(t.getEvents(s,500)),setTimeout(function(){t.dlg.show(t)},500)}),this.tbl=new WUX.WTable(this.subId("tbl"),["Date time","Type","Application","Class","Method","Elapsed","Size","Exception"]),this.tbl.selectionMode="single",this.tbl.setState(this.getAllEvents()),this.cnt=new WUX.WContainer,this.cnt.addRow().addCol("12").section("Filter").add(this.frm),this.state.msg&&this.cnt.addRow().addCol("12").section("Message").add(this.lbl),this.cnt.addRow().addCol("12").section("Chart").add(this.chr).addRow().addCol("12").section("Events").add(this.tbl),this.cnt},a.prototype.refresh=function(){var t=this.frm.getState()
return this.frh=e.getString(t,"frh"),this.toh=e.getString(t,"toh"),this.title=this.sel.getProps(),this.updateProps(this.sel.getState()),this},a.prototype.updateProps=function(t){i.prototype.updateProps.call(this,t),this.mounted&&(this.chr.setState(this.getChartData()),this.tbl.setState(this.getAllEvents()))},a.prototype.getChartData=function(){var t={},s=this.props.split("_")
if(!s||s.length<2)return t
var i=e.toArray(this.state[s[0]])
if(!i||!i.length)return t
for(var a=e.toNumber(s[1]),h=[],n=[],r=[],o=0;o<i.length;o++){var l=i[o],d=e.toString(l[0]),u=l[a],p=this.getTime(d)
if(!(p<this.frh)){if(p>this.toh)break
h.push(d),r.push(u)}}return n.push(r),t.labels=h,t.series=n,t},a.prototype.getEvents=function(t,e){if(!this.state||!this.state.evn)return[]
e||(e=100)
var s=this.state.evn.length
if(0==s)return[]
for(var i=-1,a=0;a<s;a++)if(this.state.evn[a][0]>=t){i=a
break}i<0&&(i=s-1)
var h=i-e
return h<0&&(h=0),this.state.evn.slice(h,i)},a.prototype.getAllEvents=function(){var t=!this.frh||"00:00:00"==this.frh,e=!this.toh||"24:00:00"==this.toh
if(t&&e)return this.state.evn
var s=this.state.evn.length
if(0==s)return[]
for(var i=-1,a=-1,h=0;h<s;h++){var n=this.state.evn[h],r=this.getTime(n[0])
if(!(r<this.frh)){if(r>this.toh)break
i<0&&(i=h),a=h}}return i<0?[]:this.state.evn.slice(i,a)},a.prototype.getTime=function(t){if(!t)return"00:00:00"
var e=t.indexOf(" ")
return e<=0?"00:00:00":t.substring(e+1)},a}(WUX.WComponent)
t.GUIAnalyze=i}(WP||(WP={}))
